<nav class="navbar navbar-expand-lg bg-dark ">
  <div class="container-fluid">
    <%= link_to "Library map for study", :root ,class:"header-logo navbar-brand mb-0 h1" %>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <% if current_user %>
      <div class="collapse navbar-collapse bg-dark" id="navbarNav">
        <ul class="navbar-nav ms-auto nav-list">
          <li class="nav-item">
            <%= link_to "Map", pages_home_path(anchor: "gmap"), {class: "nav-link"} %>
          </li>
          <li class="nav-item">
            <%= link_to "図書館登録", :new_library, {class: "nav-link"} %>
          </li>
          <li class="nav-item">
            <%= link_to "図書館一覧", :libraries, {class: "nav-link"}  %>
          </li>
          <li class="nav-item">
          <%= link_to "ログアウト", :destroy_user_session, {method: :delete, class: "nav-link"}  %>
          </li>
          <li class="nav-item">
            <%= link_to notifications_path, class: "btn-default" do %>
              <span class="fa-stack nav-link">
                <i class="fas fa-bell fa-stack-2x bell align-bottom"></i>
                <% if current_user.passive_notifications.where(checked: false).any? %>
                  <i class="fa fa-circle fa-stack-1x mx-2 notification-mark"></i>
                <% end %>
              </span>
            <% end %>
          </li>
          <li class="nav-item">
            <%= link_to "/pages/profile", {class:"nav-link"} do %>
              <% if current_user.avatar.present? %>
                <%= image_tag current_user.avatar, alt: "アイコン画像",class:"header-host-icon" %>
              <% else %>
                <%= image_tag 'default_icon.jpg', alt: "アイコン画像", class:"mx-3 p-1 header-host-icon" %>
              <% end %>
            <% end %>
          </li>
        </ul>
      </div>
    <% else %>
      <div class="collapse navbar-collapse ms-auto" id="navbarNav">
        <ul class="navbar-nav ms-auto nav-list">
          <li class="nav-item">
            <%= link_to "Library map for studyとは", :pages_introduction, {class: "nav-link mx-3 my-2"} %>
          </li>
          <li class="nav-item">
            <%= link_to "Map", pages_home_path(anchor: "gmap"), {class: "nav-link mx-3 my-2"} %>
          </li>
          <li class="nav-item">
            <%= link_to "図書館一覧", :libraries, {class: "nav-link mx-3 my-2"}  %>
          </li>
          <li class="nav-item">
            <%= link_to '新規登録', :new_user_registration, {class:"nav-link mx-3 my-2"} %>
          </li>
          <li class="nav-item">
            <%= link_to 'ログイン', :new_user_session, {class:"nav-link mx-3 my-2"} %>
          </li>
          <li class="nav-item">
            <%= link_to 'ゲストログイン（閲覧用）', users_guest_sign_in_path, class:"nav-link mx-3 my-2", method: :post %>
          </li>
        </ul>
      </div>
    <% end %>
  </div>
</nav>
